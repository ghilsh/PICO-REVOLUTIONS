[gd_scene load_steps=14 format=2]

[ext_resource path="res://Screens/Rooms/Room.gd" type="Script" id=1]
[ext_resource path="res://Enviroment/WalkableTiles.gd" type="Script" id=2]
[ext_resource path="res://Enviroment/Exit.gd" type="Script" id=3]
[ext_resource path="res://Enviroment/Entrance.gd" type="Script" id=4]
[ext_resource path="res://Entities/NPC/NPC.tscn" type="PackedScene" id=5]
[ext_resource path="res://Entities/Player/Player.tscn" type="PackedScene" id=6]
[ext_resource path="res://Materials/MainTiles.tres" type="TileSet" id=7]
[ext_resource path="res://Entities/Enemy/Enemy.tscn" type="PackedScene" id=8]

[sub_resource type="NavigationPolygon" id=5]
vertices = PoolVector2Array( 448, 128, 576, 128, 576, 624, 448, 624, 128, 128, 256, 128, 256, 248, 128, 248, 768, 128, 896, 128, 896, 248, 768, 248, 128, 384, 256, 384, 256, 504, 128, 504, 768, 384, 896, 384, 896, 504, 768, 504 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ), PoolIntArray( 4, 5, 6, 7 ), PoolIntArray( 8, 9, 10, 11 ), PoolIntArray( 12, 13, 14, 15 ), PoolIntArray( 16, 17, 18, 19 ) ]
outlines = [ PoolVector2Array( 448, 128, 576, 128, 576, 624, 448, 624 ), PoolVector2Array( 128, 128, 256, 128, 256, 248, 128, 248 ), PoolVector2Array( 768, 128, 896, 128, 896, 248, 768, 248 ), PoolVector2Array( 128, 384, 256, 384, 256, 504, 128, 504 ), PoolVector2Array( 768, 384, 896, 384, 896, 504, 768, 504 ) ]

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 21.875, 61 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 65, 21 )

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 157, 249.5 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 78.25, 78 )

[node name="Room" type="Node2D"]
script = ExtResource( 1 )

[node name="Floor" type="Area2D" parent="."]
collision_layer = 4
script = ExtResource( 2 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="Floor"]
visible = false
navpoly = SubResource( 5 )

[node name="TileMap" type="TileMap" parent="Floor"]
z_index = -2
tile_set = ExtResource( 7 )
collision_use_parent = true
format = 1
tile_data = PoolIntArray( -131065, 0, 0, -131064, 1, 0, -131063, 1, 0, -131062, 1, 0, -131061, 1, 0, -131060, 1, 0, -131059, 1, 0, -131058, 1, 0, -131057, 1, 0, -65529, 2, 0, -65528, 4, 0, -65527, 4, 0, -65526, 4, 0, -65525, 4, 0, -65524, 4, 0, -65523, 4, 0, -65522, 4, 0, -65521, 4, 0, 7, 5, 0, 8, 5, 0, 65543, 5, 0, 65544, 5, 0, 131074, 0, 0, 131075, 536870912, 0, 131079, 0, 0, 131080, 536870912, 0, 131084, 0, 0, 131085, 536870912, 0, 196610, 2, 0, 196611, 536870914, 0, 196615, 1, 0, 196616, 1, 0, 196620, 2, 0, 196621, 536870914, 0, 262146, 5, 0, 262147, 5, 0, 262151, 1, 0, 262152, 1, 0, 262156, 5, 0, 262157, 5, 0, 327682, 5, 0, 327683, 5, 0, 327687, 1, 0, 327688, 1, 0, 327692, 5, 0, 327693, 5, 0, 393218, 0, 0, 393219, 536870912, 0, 393223, 1, 0, 393224, 1, 0, 393228, 0, 0, 393229, 536870912, 0, 458754, 2, 0, 458755, 536870914, 0, 458759, 1, 0, 458760, 1, 0, 458764, 2, 0, 458765, 536870914, 0, 524290, 5, 0, 524291, 5, 0, 524295, 1, 0, 524296, 1, 0, 524300, 5, 0, 524301, 5, 0, 589826, 5, 0, 589827, 5, 0, 589831, 1, 0, 589832, 1, 0, 589836, 5, 0, 589837, 5, 0 )

[node name="TileMap2" type="TileMap" parent="Floor"]
visible = false
z_index = -2
tile_set = ExtResource( 7 )
collision_use_parent = true
format = 1
tile_data = PoolIntArray( -131065, 0, 0, -131064, 1, 0, -131063, 1, 0, -131062, 1, 0, -131061, 1, 0, -131060, 1, 0, -131059, 1, 0, -131058, 1, 0, -131057, 1, 0, -65529, 2, 0, -65528, 4, 0, -65527, 4, 0, -65526, 4, 0, -65525, 4, 0, -65524, 4, 0, -65523, 4, 0, -65522, 4, 0, -65521, 4, 0, 7, 5, 0, 8, 5, 0, 65543, 5, 0, 65544, 5, 0, 131074, 0, 0, 131075, 536870912, 0, 131079, 0, 0, 131080, 536870912, 0, 131084, 0, 0, 131085, 536870912, 0, 196610, 2, 0, 196611, 536870914, 0, 196615, 1, 0, 196616, 1, 0, 196620, 2, 0, 196621, 536870914, 0, 262146, 5, 0, 262147, 5, 0, 262151, 1, 0, 262152, 1, 0, 262156, 5, 0, 262157, 5, 0, 327682, 5, 0, 327683, 5, 0, 327687, 1, 0, 327688, 1, 0, 327692, 5, 0, 327693, 5, 0, 393218, 0, 0, 393219, 536870912, 0, 393223, 1, 0, 393224, 1, 0, 393228, 0, 0, 393229, 536870912, 0, 458754, 2, 0, 458755, 536870914, 0, 458759, 1, 0, 458760, 1, 0, 458764, 2, 0, 458765, 536870914, 0, 524290, 5, 0, 524291, 5, 0, 524295, 1, 0, 524296, 1, 0, 524300, 5, 0, 524301, 5, 0, 589826, 5, 0, 589827, 5, 0, 589831, 1, 0, 589832, 1, 0, 589836, 5, 0, 589837, 5, 0 )

[node name="YSort" type="YSort" parent="."]

[node name="Player" parent="YSort" instance=ExtResource( 6 )]
position = Vector2( 511, 561 )

[node name="Camera2D" type="Camera2D" parent="YSort/Player"]
visible = false
current = true
limit_left = 0
limit_right = 1022
limit_bottom = 600
drag_margin_h_enabled = true
drag_margin_v_enabled = true
smoothing_enabled = true
drag_margin_left = 0.05
drag_margin_top = 0.05
drag_margin_right = 0.05
drag_margin_bottom = 0.05
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="NPC" parent="YSort" instance=ExtResource( 5 )]
position = Vector2( 490, -92 )
path_to_player = NodePath("../Player")
dialog = "guard"

[node name="Enemy" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 509, 165 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/1")

[node name="Enemy2" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 193, 458 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/2")

[node name="Enemy3" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 831, 462 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/3")

[node name="Enemy4" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 193, 185 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/4")

[node name="Enemy5" parent="YSort" instance=ExtResource( 8 )]
position = Vector2( 838, 203 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/5")

[node name="Entrances" type="Node" parent="."]

[node name="1" type="Position2D" parent="Entrances"]
position = Vector2( 512, 531 )
script = ExtResource( 4 )

[node name="2" type="Position2D" parent="Entrances"]
position = Vector2( 898, -71 )
script = ExtResource( 4 )
tag = 2

[node name="Exits" type="Node" parent="."]

[node name="1" type="Area2D" parent="Exits"]
position = Vector2( 1005, -71 )
script = ExtResource( 3 )
__meta__ = {
"_edit_group_": true
}
new_room = "res://Screens/Rooms/RoomKey1.tscn"
direction = Vector2( 1, 0 )
entrance_tag = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exits/1"]
position = Vector2( -4, 4 )
shape = SubResource( 1 )

[node name="2" type="Area2D" parent="Exits"]
position = Vector2( 459, 638 )
script = ExtResource( 3 )
__meta__ = {
"_edit_group_": true
}
new_room = "res://Screens/Rooms/Room3.tscn"
direction = Vector2( 0, 1 )
entrance_tag = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exits/2"]
position = Vector2( 55, 11 )
shape = SubResource( 2 )

[node name="AlertZones" type="Node2D" parent="."]
visible = false

[node name="1" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlertZones/1"]
position = Vector2( 513, 377.5 )
shape = SubResource( 3 )

[node name="2" type="Area2D" parent="AlertZones"]
position = Vector2( 188, 446 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlertZones/2"]
shape = SubResource( 4 )

[node name="3" type="Area2D" parent="AlertZones"]
position = Vector2( 830, 444 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlertZones/3"]
shape = SubResource( 4 )

[node name="4" type="Area2D" parent="AlertZones"]
position = Vector2( 192, 190 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlertZones/4"]
shape = SubResource( 4 )

[node name="5" type="Area2D" parent="AlertZones"]
position = Vector2( 832, 192 )
__meta__ = {
"_edit_group_": true
}

[node name="CollisionShape2D" type="CollisionShape2D" parent="AlertZones/5"]
shape = SubResource( 4 )
