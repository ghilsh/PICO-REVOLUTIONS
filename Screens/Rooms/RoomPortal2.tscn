[gd_scene load_steps=15 format=2]

[ext_resource path="res://Enviroment/WalkableTiles.gd" type="Script" id=1]
[ext_resource path="res://Enviroment/Portal.tscn" type="PackedScene" id=2]
[ext_resource path="res://Entities/Player/Player.tscn" type="PackedScene" id=3]
[ext_resource path="res://Entities/Enemy/Enemy.tscn" type="PackedScene" id=4]
[ext_resource path="res://Enviroment/Exit.gd" type="Script" id=5]
[ext_resource path="res://Screens/Rooms/Room.gd" type="Script" id=6]
[ext_resource path="res://Materials/MainTiles.tres" type="TileSet" id=7]
[ext_resource path="res://Enviroment/Entrance.gd" type="Script" id=8]
[ext_resource path="res://Enviroment/Medikit.tscn" type="PackedScene" id=9]

[sub_resource type="NavigationPolygon" id=1]
vertices = PoolVector2Array( 1472, -576, 1856, -576, 1856, 312, 1472, 312, 1216, -320, 1344, -320, 1344, -200, 1216, -200, 1216, 64, 1344, 64, 1344, 184, 1216, 184, 1984, -320, 2112, -320, 2112, -200, 1984, -200, 1984, 64, 2112, 64, 2112, 184, 1984, 184 )
polygons = [ PoolIntArray( 0, 1, 2, 3 ), PoolIntArray( 4, 5, 6, 7 ), PoolIntArray( 8, 9, 10, 11 ), PoolIntArray( 12, 13, 14, 15 ), PoolIntArray( 16, 17, 18, 19 ) ]
outlines = [ PoolVector2Array( 1472, -576, 1856, -576, 1856, 312, 1472, 312 ), PoolVector2Array( 1216, -320, 1344, -320, 1344, -200, 1216, -200 ), PoolVector2Array( 1216, 64, 1344, 64, 1344, 184, 1216, 184 ), PoolVector2Array( 1984, -320, 2112, -320, 2112, -200, 1984, -200 ), PoolVector2Array( 1984, 64, 2112, 64, 2112, 184, 1984, 184 ) ]

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 64, 29 )

[sub_resource type="RectangleShape2D" id=5]
extents = Vector2( 70.9375, 65.5 )

[sub_resource type="RectangleShape2D" id=2]
extents = Vector2( 272.5, 638.75 )

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 90, 85.5 )

[node name="Room" type="Node2D"]
script = ExtResource( 6 )

[node name="Floor" type="Area2D" parent="."]
z_index = -1
collision_layer = 4
script = ExtResource( 1 )

[node name="TileMap" type="TileMap" parent="Floor"]
z_index = -2
tile_set = ExtResource( 7 )
collision_use_parent = true
format = 1
tile_data = PoolIntArray( -1376210, 1, 0, -1376209, 1, 0, -1310674, 1, 0, -1310673, 1, 0, -1245138, 1, 0, -1245137, 1, 0, -1179602, 1, 0, -1179601, 1, 0, -1114066, 1, 0, -1114065, 1, 0, -1048530, 2, 0, -1048529, 536870914, 0, -982994, 5, 0, -982993, 5, 0, -917458, 5, 0, -917457, 5, 0, -851922, 5, 0, -851921, 5, 0, -786386, 5, 0, -786385, 5, 0, -720871, 0, 0, -720870, 536870912, 0, -720850, 5, 0, -720849, 5, 0, -655335, 1, 0, -655334, 1, 0, -655314, 5, 0, -655313, 5, 0, -589801, 0, 0, -589800, 1, 0, -589799, 1, 0, -589798, 1, 0, -589797, 1, 0, -589796, 536870912, 0, -589778, 5, 0, -589777, 5, 0, -524265, 1, 0, -524264, 1, 0, -524263, 1, 0, -524262, 1, 0, -524261, 1, 0, -524260, 1, 0, -524242, 5, 0, -524241, 5, 0, -458729, 1, 0, -458728, 1, 0, -458727, 1, 0, -458726, 1, 0, -458725, 1, 0, -458724, 1, 0, -393193, 1, 0, -393192, 1, 0, -393191, 1, 0, -393190, 1, 0, -393189, 1, 0, -393188, 1, 0, -327661, 0, 0, -327660, 536870912, 0, -327657, 1, 0, -327656, 1, 0, -327655, 1, 0, -327654, 1, 0, -327653, 1, 0, -327652, 1, 0, -327649, 0, 0, -327648, 536870912, 0, -262125, 2, 0, -262124, 536870914, 0, -262121, 1, 0, -262120, 1, 0, -262119, 1, 0, -262118, 1, 0, -262117, 1, 0, -262116, 1, 0, -262113, 2, 0, -262112, 536870914, 0, -196589, 5, 0, -196588, 5, 0, -196585, 1, 0, -196584, 1, 0, -196583, 1, 0, -196582, 1, 0, -196581, 1, 0, -196580, 1, 0, -196577, 5, 0, -196576, 5, 0, -131053, 5, 0, -131052, 5, 0, -131049, 1, 0, -131048, 1, 0, -131047, 1, 0, -131046, 1, 0, -131045, 1, 0, -131044, 1, 0, -131041, 5, 0, -131040, 5, 0, -65517, 5, 0, -65516, 5, 0, -65513, 1, 0, -65512, 1, 0, -65511, 1, 0, -65510, 1, 0, -65509, 1, 0, -65508, 1, 0, -65505, 5, 0, -65504, 5, 0, 19, 5, 0, 20, 5, 0, 23, 1, 0, 24, 1, 0, 25, 1, 0, 26, 1, 0, 27, 1, 0, 28, 1, 0, 31, 5, 0, 32, 5, 0, 65555, 0, 0, 65556, 536870912, 0, 65559, 1, 0, 65560, 1, 0, 65561, 1, 0, 65562, 1, 0, 65563, 1, 0, 65564, 1, 0, 65567, 0, 0, 65568, 536870912, 0, 131091, 2, 0, 131092, 536870914, 0, 131095, 1, 0, 131096, 1, 0, 131097, 1, 0, 131098, 1, 0, 131099, 1, 0, 131100, 1, 0, 131103, 2, 0, 131104, 536870914, 0, 196627, 5, 0, 196628, 5, 0, 196631, 1, 0, 196632, 1, 0, 196633, 1, 0, 196634, 1, 0, 196635, 1, 0, 196636, 1, 0, 196639, 5, 0, 196640, 5, 0, 262163, 5, 0, 262164, 5, 0, 262167, 2, 0, 262168, 4, 0, 262169, 1, 0, 262170, 1, 0, 262171, 4, 0, 262172, 536870914, 0, 262175, 5, 0, 262176, 5, 0, 327699, 5, 0, 327700, 5, 0, 327703, 5, 0, 327705, 1, 0, 327706, 1, 0, 327708, 5, 0, 327711, 5, 0, 327712, 5, 0, 393235, 5, 0, 393236, 5, 0, 393239, 5, 0, 393241, 1, 0, 393242, 1, 0, 393244, 5, 0, 393247, 5, 0, 393248, 5, 0, 458771, 5, 0, 458772, 5, 0, 458775, 5, 0, 458777, 2, 0, 458778, 536870914, 0, 458780, 5, 0, 458783, 5, 0, 458784, 5, 0, 524307, 5, 0, 524308, 5, 0, 524311, 5, 0, 524313, 5, 0, 524314, 5, 0, 524316, 5, 0, 524319, 5, 0, 524320, 5, 0, 589843, 5, 0, 589844, 5, 0, 589847, 5, 0, 589849, 5, 0, 589850, 5, 0, 589852, 5, 0, 589855, 5, 0, 589856, 5, 0, 720894, 0, 0, 720895, 536870912, 0, 655379, 5, 0, 655380, 5, 0, 655383, 5, 0, 655385, 5, 0, 655386, 5, 0, 655388, 5, 0, 655391, 5, 0, 655392, 5, 0, 786430, 1, 0, 786431, 1, 0, 720915, 5, 0, 720916, 5, 0, 720919, 5, 0, 720921, 5, 0, 720922, 5, 0, 720924, 5, 0, 720927, 5, 0, 720928, 5, 0, 851966, 1, 0, 851967, 1, 0, 786451, 5, 0, 786452, 5, 0, 786455, 5, 0, 786457, 5, 0, 786458, 5, 0, 786460, 5, 0, 786463, 5, 0, 786464, 5, 0, 917502, 1, 0, 917503, 1, 0, 851987, 5, 0, 851988, 5, 0, 851991, 5, 0, 851993, 5, 0, 851994, 5, 0, 851996, 5, 0, 851999, 5, 0, 852000, 5, 0, 983038, 1, 0, 983039, 1, 0, 917523, 5, 0, 917524, 5, 0, 917527, 5, 0, 917529, 5, 0, 917530, 5, 0, 917532, 5, 0, 917535, 5, 0, 917536, 5, 0, 1048574, 1, 0, 1048575, 1, 0, 983059, 5, 0, 983060, 5, 0, 983063, 5, 0, 983065, 5, 0, 983066, 5, 0, 983068, 5, 0, 983071, 5, 0, 983072, 5, 0 )

[node name="NavigationPolygonInstance" type="NavigationPolygonInstance" parent="Floor"]
navpoly = SubResource( 1 )

[node name="YSort" type="YSort" parent="."]

[node name="Player" parent="YSort" instance=ExtResource( 3 )]
position = Vector2( -62, 926 )

[node name="Camera2D" type="Camera2D" parent="YSort/Player"]
visible = false
current = true
limit_left = -600
limit_top = -1344
limit_bottom = 1024
drag_margin_h_enabled = true
drag_margin_v_enabled = true
smoothing_enabled = true
drag_margin_left = 0.05
drag_margin_top = 0.05
drag_margin_right = 0.05
drag_margin_bottom = 0.05
editor_draw_limits = true
editor_draw_drag_margin = true

[node name="Enemy" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 1736, -174 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/1")

[node name="Enemy2" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 1656, -550 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/1")

[node name="Enemy3" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 1284, 135 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/2")

[node name="Enemy4" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 2050, 137 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/3")

[node name="Enemy5" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 1282, -247 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/4")

[node name="Enemy6" parent="YSort" instance=ExtResource( 4 )]
position = Vector2( 2051, -242 )
path_to_player = NodePath("../Player")
alert_zone = NodePath("../../AlertZones/5")

[node name="PortalPair2" type="Node2D" parent="YSort"]

[node name="Portal1_1" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( -63, 673 )
z_as_relative = false
path_to_destination = NodePath("../Portal1_2")

[node name="Portal1_2" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 1664, 460 )
path_to_destination = NodePath("../Portal1_1")

[node name="Portal2_1" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 1662, -634 )
path_to_destination = NodePath("../Portal2_2")

[node name="Portal2_2" parent="YSort" instance=ExtResource( 2 )]
position = Vector2( 3009, -998 )
path_to_destination = NodePath("../Portal2_1")

[node name="Medikit" parent="YSort" instance=ExtResource( 9 )]
position = Vector2( 1577, -188 )

[node name="Entrances" type="Node" parent="."]

[node name="1" type="Position2D" parent="Entrances"]
position = Vector2( -60, 951 )
script = ExtResource( 8 )

[node name="2" type="Position2D" parent="Entrances"]
position = Vector2( 3009, -1187 )
script = ExtResource( 8 )
tag = 2

[node name="Exits" type="Node" parent="."]

[node name="Exit 1" type="Area2D" parent="Exits"]
position = Vector2( -64, 1005 )
script = ExtResource( 5 )
__meta__ = {
"_edit_group_": true
}
new_room = "res://Screens/Rooms/RoomPortal1.tscn"
direction = Vector2( 0, 1 )
entrance_tag = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exits/Exit 1"]
shape = SubResource( 4 )

[node name="Exit 2" type="Area2D" parent="Exits"]
position = Vector2( 3010, -1334 )
script = ExtResource( 5 )
__meta__ = {
"_edit_group_": true
}
new_room = "res://Screens/Rooms/RoomFinal.tscn"
direction = Vector2( 0, -1 )
entrance_tag = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="Exits/Exit 2"]
position = Vector2( -4, 6.5 )
shape = SubResource( 5 )

[node name="AlertZones" type="Node2D" parent="."]

[node name="1" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="AlertZones/1"]
position = Vector2( 1667.5, -94.75 )
shape = SubResource( 2 )

[node name="2" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="AlertZones/2"]
position = Vector2( 1281, 118.5 )
shape = SubResource( 3 )

[node name="3" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="AlertZones/3"]
position = Vector2( 2055, 121 )
shape = SubResource( 3 )

[node name="4" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="AlertZones/4"]
position = Vector2( 1278, -253 )
shape = SubResource( 3 )

[node name="5" type="Area2D" parent="AlertZones"]

[node name="CollisionShape2D2" type="CollisionShape2D" parent="AlertZones/5"]
position = Vector2( 2046, -265 )
shape = SubResource( 3 )
